{"version":3,"sources":["../../../app/components/Reports/ReportsIndex.jsx"],"names":["ReportsIndex","props","state","dispatch","page","params","reports_page","componentWillReceiveProps","bind","nextProps","reports","length","forEach","n","idx","push","pages","active","i","Math","ceil","site","n_reports","reportsLink","pagination","Component","propTypes","mapStateToProps","ownProps"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;AAGA;;AAEA;;;;AACA;;;;AAEA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMA,Y;;;AACJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAEjB;AAFiB,4HACXA,KADW;;AAGjB,UAAKC,KAAL,GAAa,EAAb;AACA;AACA,UAAKD,KAAL,CAAWE,QAAX,CAAoB,2BAAa,EAAEC,MAAMH,MAAMI,MAAN,CAAaC,YAArB,EAAb,CAApB;AACA,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BC,IAA/B,OAAjC;AANiB;AAOlB;;;;8CAEyBC,S,EAAW;AACnC;AACA,UAAIA,UAAUJ,MAAV,CAAiBC,YAAjB,KAAkC,KAAKL,KAAL,CAAWI,MAAX,CAAkBC,YAAxD,EAAsE;AACpE,aAAKL,KAAL,CAAWE,QAAX,CAAoB,2BAAa,EAAEC,MAAMK,UAAUJ,MAAV,CAAiBC,YAAzB,EAAb,CAApB;AACD;AACF;;;6BAES;AACR;AACA,UAAI,KAAKL,KAAL,CAAWS,OAAX,CAAmBC,MAAnB,KAA8B,CAAlC,EAAqC;AAAE,eAAQ,IAAR;AAAe;;AAEtD,UAAID,UAAU,EAAd;AACA,WAAKT,KAAL,CAAWS,OAAX,CAAmBE,OAAnB,CAA2B,UAACC,CAAD,EAAIC,GAAJ,EAAY;AACrCJ,gBAAQK,IAAR,CAAa,4DAAkB,KAAKD,GAAvB,EAA4B,QAAQD,CAApC,GAAb;AACD,OAFD;;AAIA,UAAIG,QAAQ,EAAZ;AAAA,UAAgBZ,aAAhB;AAAA,UAAsBa,eAAtB;AACA,WAAK,IAAIC,IAAE,CAAX,EAAcA,KAAGC,KAAKC,IAAL,CAAU,KAAKnB,KAAL,CAAWoB,IAAX,CAAgBC,SAAhB,GAA0B,EAApC,CAAjB,EAA0DJ,GAA1D,EAA+D;AAAE;AAC/Dd,eAAO,CAAC,CAAC,KAAKH,KAAL,CAAWI,MAAX,CAAkBC,YAApB,GAAmC,KAAKL,KAAL,CAAWI,MAAX,CAAkBC,YAArD,GAAoE,CAA3E;AACAW,iBAASb,QAAQc,CAAR,GAAY,QAAZ,GAAuB,EAAhC;AACAF,cAAMD,IAAN,CAAW;AAAA;AAAA,YAAM,KAAKG,CAAX,EAAc,gCAA8BD,MAA5C,EAAsD,IAAI,eAAUM,WAAV,CAAsB,EAACjB,cAAaY,CAAd,EAAtB,CAA1D;AAAoGA;AAApG,SAAX;AACD;AACD,UAAIM,aAAc;AAAA;AAAA,UAAK,WAAU,YAAf;AAA8BR;AAA9B,OAAlB;;AAEA,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AACE;AAAA;AAAA;AACE;AAAA;AAAA,gBAAK,IAAI,EAAT;AACIN,qBADJ;AAEIc,wBAFJ;AAAA;AAGc,mBAAKvB,KAAL,CAAWoB,IAAX,CAAgBC;AAH9B;AADF;AADF;AADF,OADF;AAaD;;;;EA/CwB,gBAAMG,S;;AAkDjCzB,aAAa0B,SAAb,GAAyB,EAAzB;;AAGA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAACzB,KAAD,EAAQ0B,QAAR,EAAqB;AAC3C,SAAO;AACLlB,aAASR,MAAMQ,OADV;AAELW,UAAMnB,MAAMmB;AAFP,GAAP;AAID,CALD;;kBAOe,yBAAQM,eAAR,EAAyB3B,YAAzB,C","file":"ReportsIndex.js","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { connect } from 'react-redux'\nimport {\n  Grid, Row, Col,\n} from 'react-bootstrap'\nimport { Link } from 'react-router'\n\nimport config from 'config'\nimport Center from '../Center'\n\nimport { reportsIndex, siteShow } from '../../actions'\nimport { AppRouter } from '../App'\nimport Leaderboard from '../App/Leaderboard'\nimport LargeSquare from '../App/LargeSquare'\nimport ReportsIndexItem from './ReportsIndexItem'\n\nclass ReportsIndex extends React.Component {\n  constructor(props) {\n    super(props)\n    // console.log('+++ +++ ReportsIndex constructor:', props)\n    this.state = {}\n    // this.props.dispatch(siteShow())\n    this.props.dispatch(reportsIndex({ page: props.params.reports_page }))\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(\"+++ +++ reportsIndex will receive props:\", nextProps, this.props, this.state)\n    if (nextProps.params.reports_page !== this.props.params.reports_page) {\n      this.props.dispatch(reportsIndex({ page: nextProps.params.reports_page }))\n    }\n  }\n\n  render () {\n    // console.log('+++ +++ render ReportsIndex:', this.props, this.state)\n    if (this.props.reports.length === 0) { return (null) }\n\n    let reports = []\n    this.props.reports.forEach((n, idx) => {\n      reports.push(<ReportsIndexItem key={idx} report={n} />)\n    })\n    \n    let pages = [], page, active\n    for (let i=1; i<=Math.ceil(this.props.site.n_reports/10); i++) { // @TODO: this 10 shouldn't be hardwired\n      page = !!this.props.params.reports_page ? this.props.params.reports_page : 1\n      active = page == i ? 'active' : ''\n      pages.push(<Link key={i} className={`btn btn-default ${active}`} to={AppRouter.reportsLink({reports_page:i})}>{i}</Link>)\n    }\n    let pagination = (<div className=\"pagination\">{ pages }</div>)\n\n    return (\n      <div>\n        <Grid>\n          <Row>\n            <Col xs={12} >\n              { reports }\n              { pagination }\n              N reports: {this.props.site.n_reports}\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    )\n  }\n}\n\nReportsIndex.propTypes = {\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    reports: state.reports,\n    site: state.site,\n  }\n}\n\nexport default connect(mapStateToProps)(ReportsIndex)\n\n"]}