{"version":3,"sources":["../../../app/components/Galleries/GalleriesIndex.jsx"],"names":["GalleriesIndex","props","dispatch","page","params","galleries_page","componentWillReceiveProps","bind","nextProps","galleries","length","forEach","n","idx","push","pages","active","i","Math","ceil","site","n_galleries","galleriesLink","pagination","Component","propTypes","object","isRequired","array","mapStateToProps","state","ownProps"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAGA;;AAEA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;;;;;IAEMA,c;;;AACJ,0BAAYC,KAAZ,EAAmB;AAAA;;AAEjB;;AAFiB,gIACXA,KADW;;AAIjBA,UAAMC,QAAN,CAAe,6BAAe,EAAEC,MAAM,MAAKF,KAAL,CAAWG,MAAX,CAAkBC,cAA1B,EAAf,CAAf;;AAEA,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BC,IAA/B,OAAjC;AANiB;AAOlB;;;;8CAEyBC,S,EAAW;AACnC;AACA,UAAIA,UAAUJ,MAAV,CAAiBC,cAAjB,KAAoC,KAAKJ,KAAL,CAAWG,MAAX,CAAkBC,cAA1D,EAA0E;AACxE,aAAKJ,KAAL,CAAWC,QAAX,CAAoB,6BAAe,EAAEC,MAAMK,UAAUJ,MAAV,CAAiBC,cAAzB,EAAf,CAApB;AACD;AACF;;;6BAES;AACR;AACA,UAAI,CAAC,KAAKJ,KAAL,CAAWQ,SAAZ,IAAyB,KAAKR,KAAL,CAAWQ,SAAX,CAAqBC,MAArB,KAAgC,CAA7D,EAAgE;AAAE,eAAQ,IAAR;AAAe;;AAEjF,UAAID,YAAY,EAAhB;AACA,WAAKR,KAAL,CAAWQ,SAAX,CAAqBE,OAArB,CAA6B,UAACC,CAAD,EAAIC,GAAJ,EAAY;AACvCJ,kBAAUK,IAAV,CAAe,8DAAoB,KAAKD,GAAzB,EAA8B,SAASD,CAAvC,GAAf;AACD,OAFD;;AAIA,UAAIG,QAAQ,EAAZ;AAAA,UAAgBZ,aAAhB;AAAA,UAAsBa,eAAtB;AACA,WAAK,IAAIC,IAAE,CAAX,EAAcA,KAAGC,KAAKC,IAAL,CAAU,KAAKlB,KAAL,CAAWmB,IAAX,CAAgBC,WAAhB,GAA4B,EAAtC,CAAjB,EAA4DJ,GAA5D,EAAiE;AAAE;AACjEd,eAAO,CAAC,CAAC,KAAKF,KAAL,CAAWG,MAAX,CAAkBC,cAApB,GAAqC,KAAKJ,KAAL,CAAWG,MAAX,CAAkBC,cAAvD,GAAwE,CAA/E;AACAW,iBAASb,QAAQc,CAAR,GAAY,QAAZ,GAAuB,EAAhC;AACAF,cAAMD,IAAN,CAAW;AAAA;AAAA,YAAM,KAAKG,CAAX,EAAc,gCAA8BD,MAA5C,EAAsD,IAAI,eAAUM,aAAV,CAAwB,EAACjB,gBAAeY,CAAhB,EAAxB,CAA1D;AAAwGA;AAAxG,SAAX;AACD;AACD,UAAIM,aAAa;AAAA;AAAA,UAAK,WAAU,YAAf;AAA8BR;AAA9B,OAAjB;;AAEA,aACE;AAAA;AAAA;AACE;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,IAAI,EAAT;AACIQ,sBADJ;AAEId,qBAFJ;AAGIc;AAHJ;AADF;AADF,OADF;AAWD;;;;EA7C0B,gBAAMC,S;;AAgDnCxB,eAAeyB,SAAf,GAA2B;AACzBrB,UAAQ,oBAAUsB,MAAV,CAAiBC,UADA;AAEzBlB,aAAW,oBAAUmB,KAFI;AAGzBR,QAAM,oBAAUM;AAHS,CAA3B;;AAMA,IAAMG,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAC3C,SAAO;AACLX,UAAMU,MAAMV,IADP;AAELX,eAAWqB,MAAMrB;AAFZ,GAAP;AAID,CALD;;kBAOe,yBAAQoB,eAAR,EAAyB7B,cAAzB,C","file":"GalleriesIndex.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport { connect } from 'react-redux'\nimport { Grid, Row, Col,\n         Panel,\n } from 'react-bootstrap'\nimport { Link } from 'react-router'\n\nimport config from 'config'\nimport Center from '../Center'\nimport { galleriesIndex } from '../../actions'\nimport GalleriesIndexItem from './GalleriesIndexItem'\nimport { AppRouter } from '../App'\n\nclass GalleriesIndex extends React.Component {\n  constructor(props) {\n    super(props)\n    // console.log('+++ +++ GalleriesIndex constructor:', props)\n\n    props.dispatch(galleriesIndex({ page: this.props.params.galleries_page }))\n\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // console.log(\"+++ +++ galleriesIndex will receive props:\", nextProps, this.props, this.state)\n    if (nextProps.params.galleries_page !== this.props.params.galleries_page) {\n      this.props.dispatch(galleriesIndex({ page: nextProps.params.galleries_page }))\n    }\n  }\n\n  render () {\n    // console.log('+++ +++ GalleriesIndex render:', this.props, this.state)\n    if (!this.props.galleries || this.props.galleries.length === 0) { return (null) }\n\n    let galleries = []\n    this.props.galleries.forEach((n, idx) => {\n      galleries.push(<GalleriesIndexItem key={idx} gallery={n} />)\n    })\n    \n    let pages = [], page, active\n    for (let i=1; i<=Math.ceil(this.props.site.n_galleries/10); i++) { // @TODO: this 10 shouldn't be hardwired\n      page = !!this.props.params.galleries_page ? this.props.params.galleries_page : 1\n      active = page == i ? 'active' : ''\n      pages.push(<Link key={i} className={`btn btn-default ${active}`} to={AppRouter.galleriesLink({galleries_page:i})}>{i}</Link>)\n    }\n    let pagination = <div className=\"pagination\">{ pages }</div>\n\n    return (\n      <Grid>\n        <Row>\n          <Col xs={12}>\n            { pagination }\n            { galleries }\n            { pagination }\n          </Col>\n        </Row>\n      </Grid>\n    )\n  }\n}\n\nGalleriesIndex.propTypes = {\n  params: PropTypes.object.isRequired,\n  galleries: PropTypes.array,\n  site: PropTypes.object,\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    site: state.site,\n    galleries: state.galleries,\n  }\n}\n\nexport default connect(mapStateToProps)(GalleriesIndex)\n\n"]}