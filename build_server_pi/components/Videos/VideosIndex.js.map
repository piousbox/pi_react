{"version":3,"sources":["../../../app/components/Videos/VideosIndex.jsx"],"names":["VideosIndex","props","state","dispatch","page","params","videos_page","componentWillReceiveProps","bind","nextProps","console","log","videos","map","video","index","push","pages","active","i","Math","ceil","site","n_videos","videosLink","pagination","Component","mapState","ownProps"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;;;;;;;;;;;IAEMA,W;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACXA,KADW;;AAEjB,UAAKC,KAAL,GAAa,EAAb;AACA,UAAKD,KAAL,CAAWE,QAAX,CAAoB,2BAAa,EAAEC,MAAMH,MAAMI,MAAN,CAAaC,WAArB,EAAb,CAApB;AACA,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BC,IAA/B,OAAjC;AAJiB;AAKlB;;;;8CAEyBC,S,EAAW;AACnCC,cAAQC,GAAR,CAAY,yCAAZ,EAAuDF,SAAvD,EAAkE,KAAKR,KAAvE,EAA8E,KAAKC,KAAnF;AACA,UAAIO,UAAUJ,MAAV,CAAiBC,WAAjB,KAAiC,KAAKL,KAAL,CAAWI,MAAX,CAAkBC,WAAvD,EAAoE;AAClE,aAAKL,KAAL,CAAWE,QAAX,CAAoB,2BAAa,EAAEC,MAAMK,UAAUJ,MAAV,CAAiBC,WAAzB,EAAb,CAApB;AACD;AACF;;;6BAES;AACR,UAAIM,SAAS,EAAb;AACA,UAAI,KAAKX,KAAL,CAAWW,MAAf,EAAuB;AACrB,aAAKX,KAAL,CAAWW,MAAX,CAAkBC,GAAlB,CAAsB,UAACC,KAAD,EAAQC,KAAR,EAAkB;AACtCH,iBAAOI,IAAP,CAAY,wDAAc,KAAKD,KAAnB,EAA0B,OAAOD,KAAjC,GAAZ;AACD,SAFD;AAGD;;AAED,UAAIG,QAAQ,EAAZ;AAAA,UAAgBb,aAAhB;AAAA,UAAsBc,eAAtB;AACA,WAAK,IAAIC,IAAE,CAAX,EAAcA,KAAGC,KAAKC,IAAL,CAAU,KAAKpB,KAAL,CAAWqB,IAAX,CAAgBC,QAAhB,GAAyB,EAAnC,CAAjB,EAAyDJ,GAAzD,EAA8D;AAAE;AAC9Df,eAAO,CAAC,CAAC,KAAKH,KAAL,CAAWI,MAAX,CAAkBC,WAApB,GAAkC,KAAKL,KAAL,CAAWI,MAAX,CAAkBC,WAApD,GAAkE,CAAzE;AACAY,iBAASd,QAAQe,CAAR,GAAY,QAAZ,GAAuB,EAAhC;AACAF,cAAMD,IAAN,CAAW;AAAA;AAAA,YAAM,KAAKG,CAAX,EAAc,gCAA8BD,MAA5C,EAAsD,IAAI,eAAUM,UAAV,CAAqB,EAAClB,aAAYa,CAAb,EAArB,CAA1D;AAAkGA;AAAlG,SAAX;AACD;AACD,UAAIM,aAAc;AAAA;AAAA,UAAK,WAAU,YAAf;AAA8BR;AAA9B,OAAlB;;AAEA,aACE;AAAA;AAAA,UAAM,WAAN;AACE;AAAA;AAAA;AACE;AAAA;AAAA,cAAK,IAAI,EAAT;AACIQ,sBADJ;AAEIb,kBAFJ;AAGIa;AAHJ;AADF;AADF,OADF;AAWD;;;;EA1CuB,gBAAMC,S;;AA6ChC,IAAMC,WAAW,SAAXA,QAAW,CAACzB,KAAD,EAAQ0B,QAAR,EAAqB;AACpC,SAAO;AACLhB,YAAQV,MAAMU,MADT;AAELU,UAAMpB,MAAMoB;AAFP,GAAP;AAID,CALD;;kBAQe,yBAAQK,QAAR,EAAkB3B,WAAlB,C","file":"VideosIndex.js","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router'\nimport {\n  Grid, Row, Col,\n} from 'react-bootstrap'\n\nimport { videosAction } from '../../actions'\nimport { AppRouter } from '../App'\nimport VideoPreview from './VideoPreview'\n\nclass VideosIndex extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.props.dispatch(videosAction({ page: props.params.videos_page }))\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log(\"+++ +++ videosIndex will receive props:\", nextProps, this.props, this.state)\n    if (nextProps.params.videos_page !== this.props.params.videos_page) {\n      this.props.dispatch(videosAction({ page: nextProps.params.videos_page }))\n    }\n  }\n\n  render () {\n    let videos = []\n    if (this.props.videos) {\n      this.props.videos.map((video, index) => {\n        videos.push(<VideoPreview key={index} video={video} />)\n      })\n    }\n\n    let pages = [], page, active\n    for (let i=1; i<=Math.ceil(this.props.site.n_videos/10); i++) { // @TODO: this 10 shouldn't be hardwired\n      page = !!this.props.params.videos_page ? this.props.params.videos_page : 1\n      active = page == i ? 'active' : ''\n      pages.push(<Link key={i} className={`btn btn-default ${active}`} to={AppRouter.videosLink({videos_page:i})}>{i}</Link>)\n    }\n    let pagination = (<div className=\"pagination\">{ pages }</div>)\n    \n    return (\n      <Grid fluid>\n        <Row>\n          <Col xs={12}>\n            { pagination }\n            { videos }\n            { pagination }\n          </Col>\n        </Row>\n      </Grid>\n    )\n  }\n}\n\nconst mapState = (state, ownProps) => {\n  return {\n    videos: state.videos,\n    site: state.site,\n  }\n}\n\n\nexport default connect(mapState)(VideosIndex)\n"]}