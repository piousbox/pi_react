{"version":3,"sources":["../../app/actions/index.js"],"names":["setApiUrl","type","apiUrl","setLocation","locationName","dispatch","getState","url","fetch","then","r","json","location","_data","citiesIndex","state","cities","length","citiesShow","args","cityname","city","galleries","galleriesIndex","domain","page","galleriesShow","galleryname","gallery","reportsShow","reportname","report","reportsIndex","reports","siteNewsitemsAction","newsitems","siteShow","site","tagAction","tagname","tag","tagsAction","tags","venuesShow","venuename","venue","venuesIndexAction","arg","setVenues","venues","videoAction","videosAction","videos","loginAction","logoutAction","profileAction"],"mappings":"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","file":"index.js","sourcesContent":["\n/*\n * tgm_react (of bjjc) appActions.js\n */\n\n// import ReduxThunk from 'redux-thunk'\n\nimport AppDispatcher from '../dispatcher/AppDispatcher'\n\nimport {\n  CONST,\n\n  DO_LOGOUT,\n\n  ITEMS_GET_SUCCESS,\n  ITEMS_GET_ERROR,\n\n  SET,\n\n  SET_API_URL,\n\n  SET_CITIES_INDEX,\n  SET_CITIES_SHOW,\n  SET_CITY,\n  \n  SET_GALLERY,\n  SET_GALLERIES,\n\n  SET_LOCATION,\n\n  SET_MY_GALLERIES,\n  SET_MY_REPORTS,\n\n  SET_PROFILE,\n\n  SET_REPORT,\n  SET_REPORTS,\n\n  SET_SITE,\n  SET_SITE_NEWSITEMS,\n\n  SET_VENUE,\n\n} from '../constants'\n\nimport config from 'config'\n\nimport TgmApi from '../components/App/TgmApi'\n\nconst setApiUrl = () => {\n  return {\n    type: SET_API_URL,\n    apiUrl: config.apiUrl,\n  }\n}\n\nconst setLocation = (locationName) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/locations/${locationName}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_LOCATION,\n        location: _data,\n      })\n    })\n  }\n}\n\nconst citiesIndex = () => {\n  return (dispatch, getState) => { \n    let state = getState()\n    let url = config.apiUrl + \"/api/cities.json\"\n    \n    if (state.cities.length > 0) {\n      dispatch({\n        type: SET_CITIES_INDEX,\n        cities: state.cities\n      })\n    } else {\n      fetch(url).then(r => r.json()).then(_data => {\n        dispatch({\n          type: SET_CITIES_INDEX,\n          cities: _data,\n        })\n      })\n    }\n  }\n}\n\nconst citiesShow = (args) => {\n  return (dispatch, getState) => {\n    let state = getState()\n    let url = `${config.apiUrl}/api/cities/view/${args.cityname}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_CITY,\n        cityname: args.cityname,\n        city: _data.city,\n        galleries: _data.galleries,\n      })\n    })\n  }\n}\n\nconst galleriesIndex = (args) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/galleries.json?domain=${config.domain}`\n    if (args.cityname) {\n      url = `${url}&cityname=${args.cityname}`\n    }\n    if (args.page) {\n      url = `${url}&galleries_page=${args.page}`\n    }\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET.galleries,\n        galleries: _data,\n      })\n    })\n  }\n}\n\nconst galleriesShow = (args) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/galleries/view/${args.galleryname}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_GALLERY,\n        galleryname: args.galleryname,\n        gallery: _data.gallery,\n      })\n    })\n  }\n}\n\n/* const myGalleriesAction = (args) => {\n  return (dispatch, getState) => {\n    dispatch({\n      type: SET_MY_GALLERIES,\n    })\n  }\n}\nconst myReportsAction = (args) => {\n  return (dispatch, getState) => {\n    dispatch({\n      type: SET_MY_REPORTS,\n    })\n  }\n} */\n\nconst reportsShow = (args) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/reports/view/${args.reportname}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_REPORT,\n        report: _data.report,\n      })\n    })\n  }\n}\n\nconst reportsIndex = (args={}) => {\n  // console.log('+++ +++ reportsAction:', args)\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/reports.json?domain=${config.domain}`\n    if (args.page) {\n      url = `${url}&reports_page=${args.page}`\n    }\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_REPORTS,\n        reports: _data,\n      })\n    })\n  }\n}\n\nconst siteNewsitemsAction = (args = {}) => {\n  return (dispatch, getState) => {\n    let state = getState()\n    let url = `${config.apiUrl}/api/sites/view/${config.domain}/newsitems/${args.page}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_SITE_NEWSITEMS,\n        newsitems: _data.newsitems,\n      })\n    })\n  }\n}\n\nconst siteShow = (args={}) => {\n  // console.log('+++ +++ siteAction', args)\n  return (dispatch, getState) => {\n    let state = getState()\n    let url = `${config.apiUrl}/api/sites/view/${config.domain}.json`    \n    if (state.site && state.site.domain) {\n      // ;\n    } else {\n      fetch(url).then(r => r.json()).then(_data => {\n        dispatch({\n          type: SET_SITE,\n          site: _data.site,\n        })\n      })\n    }\n  }\n}\n\nconst tagAction = (tagname) => {\n  return (dispatch) => {\n    let url = `${config.apiUrl}/api/tags/view/${tagname}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({ type: SET.tag, tag: _data })\n    })\n  }\n}\n\nconst tagsAction = () => {\n  return (dispatch) => {\n    let url = `${config.apiUrl}/api/sites/view/${config.domain}/tags.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({ type: SET.tags, tags: _data })\n    })\n  }\n}\n\n// v\nconst venuesShow = (args) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/venues/view/${args.venuename}.json`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET_VENUE,\n        venue: _data.venue,\n      })\n    })\n  }\n}\n\nconst venuesIndexAction = (arg) => {\n  // console.log('+++ venuesIndexAction:', arg)\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/venues.json?cityname=${arg.cityname}`\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: CONST.setVenues,\n        venues: _data.venues,\n      })\n    })\n  }\n}\n\nconst videoAction = () => {\n}\n\nconst videosAction = (args) => {\n  return (dispatch, getState) => {\n    let url = `${config.apiUrl}/api/videos.json?a=b`\n    if (args.page) { url = `${url}&videos_page=${args.page}` }\n    fetch(url).then(r => r.json()).then(_data => {\n      dispatch({\n        type: SET.videos,\n        videos: _data.videos,\n      })\n    })\n  }\n}\n\nimport { profileAction, loginAction, logoutAction } from './profileActions'\n\nexport default {\n  citiesIndex,\n  citiesShow,\n\n  galleriesIndex,\n  galleriesShow,\n\n  loginAction,\n  logoutAction,\n  profileAction,\n\n  // myReportsAction,\n  // myGalleriesAction,\n\n  reportsShow,\n  reportsIndex,\n\n  setApiUrl,\n  setLocation,\n  siteShow,\n  siteNewsitemsAction,\n\n  tagAction,\n  tagsAction,\n\n  venuesShow,\n  venuesIndexAction,\n  videoAction,\n  videosAction,\n\n}\n"]}